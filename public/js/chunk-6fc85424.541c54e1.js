(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fc85424"],{"17e1":function(t,e,n){"use strict";var a=n("546e"),r=n.n(a);r.a},"2e29":function(t,e,n){},"546e":function(t,e,n){},"8c88":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-snackbar",{staticClass:"text-capitalize",attrs:{timeout:3e3,top:"",color:t.snackColor},model:{value:t.snack,callback:function(e){t.snack=e},expression:"snack"}},[t._v("\n    "+t._s(t.snackText)+"\n    "),n("v-btn",{attrs:{outline:""},on:{click:function(e){t.snack=!1}}},[n("v-icon",[t._v("close")])],1)],1),n("v-toolbar",{staticClass:"elevation-1",attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[t._v("Accounts")]),n("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),n("v-spacer"),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("New Account")]),n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),n("v-card-text",[n("v-container",{attrs:{"grid-list-md":""}},[n("v-form",{ref:"accountForm",attrs:{wrap:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{label:"Name",rules:t.nameRules},model:{value:t.editedAccount.name,callback:function(e){t.$set(t.editedAccount,"name",e)},expression:"editedAccount.name"}}),n("v-text-field",{attrs:{label:"Email",rules:t.emailRules},model:{value:t.editedAccount.email,callback:function(e){t.$set(t.editedAccount,"email",e)},expression:"editedAccount.email"}}),n("v-switch",{attrs:{label:"Active",color:"primary"},model:{value:t.editedAccount.active,callback:function(e){t.$set(t.editedAccount,"active",e)},expression:"editedAccount.active"}}),n("v-checkbox",{attrs:{multiple:"",label:"Admin",value:"admin",color:"primary"},model:{value:t.editedAccount.roles,callback:function(e){t.$set(t.editedAccount,"roles",e)},expression:"editedAccount.roles"}}),n("v-checkbox",{attrs:{multiple:"",label:"User",value:"user",color:"primary"},model:{value:t.editedAccount.roles,callback:function(e){t.$set(t.editedAccount,"roles",e)},expression:"editedAccount.roles"}})],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{on:{click:t.close}},[t._v("Cancel")]),n("v-btn",{attrs:{color:"primary",disabled:!t.valid},on:{click:t.save}},[t._v("Save")])],1)],1)],1)],1),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.accounts,pagination:t.pagination,"total-items":t.totalAccounts,loading:t.loading},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[n("tr",[n("td",{staticClass:"columnIcon"},[n("v-icon",[t._v(t._s(e.item.active?"check_box":"check_box_outline_blank"))])],1),n("td",{staticClass:"columnIcon"},[e.item.roles.includes("admin")?n("v-icon",[t._v("security")]):t._e()],1),n("td",{on:{click:function(t){e.expanded=!e.expanded}}},[t._v(t._s(e.item.name))]),n("td",[t._v(t._s(e.item.email))]),n("td",[t._v(t._s(t._f("formatDate")(e.item.last_login)))]),n("td",{staticClass:"justify-center layout px-0"},[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(n){t.editAccount(e.item)}}},[t._v("edit")]),n("v-icon",{attrs:{small:""},on:{click:function(n){t.deleteAccount(e.item)}}},[t._v("delete")])],1)])]}},{key:"expand",fn:function(e){return[n("v-card",{attrs:{flat:""}},[n("v-card-text",[t._v("Created: "+t._s(t._f("formatDate")(e.item.created_at)))]),n("v-card-text",[t._v("Last Login: "+t._s(t._f("formatDate")(e.item.last_login)))])],1)]}}])})],1)},r=[],c=n("cebc"),s=n("5176"),i=n.n(s),o=(n("96cf"),n("3b8d")),u=(n("7f7f"),n("d225")),l=n("308d"),d=n("6bb5"),h=n("4e2b"),p=n("f28b"),v=n("c5fa"),m=function(t){function e(t,n,a){var r;return Object(u["a"])(this,e),r=Object(l["a"])(this,Object(d["a"])(e).call(this,n)),r.name=r.constructor.name,r.errorCode=t,r.message=n,r.fields=a,r}return Object(h["a"])(e,t),e}(Object(p["a"])(Error)),f={getAccounts:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v["a"].get("/admin/accounts",e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t["catch"](0),new m(t.t0.response.status,t.t0.response.data.error);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(e){return t.apply(this,arguments)}return e}(),createAccount:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v["a"].post("/admin/accounts",e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t["catch"](0),new m(t.t0.response.status,t.t0.response.data.error,t.t0.response.data.errors);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(e){return t.apply(this,arguments)}return e}(),updateAccount:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v["a"].put("/admin/accounts/".concat(e.id),e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t["catch"](0),new m(t.t0.response.status,t.t0.response.data.error,t.t0.response.data.errors);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(e){return t.apply(this,arguments)}return e}(),deleteAccount:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v["a"].delete("/admin/accounts/".concat(e));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t["catch"](0),new m(t.t0.response.status,t.t0.response.data.error);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(e){return t.apply(this,arguments)}return e}(),updateToken:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v["a"].put("/api/account/token/".concat(e.id),e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t["catch"](0),new m(t.t0.response.status,t.t0.response.data.error);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(e){return t.apply(this,arguments)}return e}(),deleteToken:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v["a"].delete("/api/account/token/".concat(e));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t["catch"](0),new m(t.t0.response.status,t.t0.response.data.error);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(e){return t.apply(this,arguments)}return e}()},g={name:"admin-accounts",data:function(){var t=this;return{accounts:[],totalAccounts:0,loading:!0,pagination:{},headers:[{text:"Active",value:"active",sortable:!0},{text:"Admin",value:"admin",sortable:!1},{text:"Name",align:"left",value:"name"},{text:"Email",align:"left",value:"email"},{text:"Last Login",align:"left",value:"last_login"}],dialog:!1,editedIndex:-1,editedAccount:{name:"",email:"",roles:["user"],active:!0},valid:!0,defaultAccount:{name:"",email:"",roles:["user"],active:!0},errors:{},snack:!1,snackColor:"",snackText:"",nameRules:[function(t){return!!t||"Name is required"},function(t){return t&&t.length<=100||"Name must be less than 100 characters"},function(){return!t.errors.name||t.errors.name}],emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"},function(){return!t.errors.email||t.errors.email}]}},watch:{dialog:function(t){t||this.close()},pagination:{handler:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getAccounts();case 2:e=t.sent,this.accounts=e.accounts,this.totalAccounts=e.count;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),depp:!0}},computed:{formTitle:function(){return-1===this.editedIndex?"New Account":"Edit Account"}},methods:{getAccounts:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,n,a,r,c,s,i,o,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,e=this.pagination,n=e.sortBy,a=e.descending,r=e.page,c=e.rowsPerPage,s={page:r,limit:-1===c?0:c,order:(n||"")+(a?" desc":"")},t.next=6,f.getAccounts(s);case 6:return i=t.sent,o=i.accounts,u=i.count,t.abrupt("return",{accounts:o,count:u});case 12:t.prev=12,t.t0=t["catch"](1),console.log("could not get accounts data",t.t0);case 15:return t.prev=15,this.loading=!1,t.finish(15);case 18:case"end":return t.stop()}},t,this,[[1,12,15,18]])}));function e(){return t.apply(this,arguments)}return e}(),editAccount:function(t){this.editedIndex=this.accounts.indexOf(t),this.editedAccount=i()({},t),this.dialog=!0},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedAccount=i()({},t.defaultAccount),t.editedIndex=-1,t.$refs.accountForm.reset()},250)},save:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.editedIndex>-1)){t.next=17;break}return t.prev=1,t.next=4,f.updateAccount(i()({},this.editedAccount));case 4:e=t.sent,i()(this.accounts[this.editedIndex],e),this.close(),this.snackSuccess("account updated"),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](1),this.errors=Object(c["a"])({},t.t0.fields),this.$refs.accountForm.validate(),this.snackError(t.t0.message);case 15:t.next=31;break;case 17:return t.prev=17,t.next=20,f.createAccount(i()({},this.editedAccount));case 20:n=t.sent,this.accounts.push(n),this.close(),this.snackSuccess("account created"),t.next=31;break;case 26:t.prev=26,t.t1=t["catch"](17),this.errors=Object(c["a"])({},t.t1.fields),this.$refs.accountForm.validate(),this.snackError(t.t1.message);case 31:case"end":return t.stop()}},t,this,[[1,10],[17,26]])}));function e(){return t.apply(this,arguments)}return e}(),deleteAccount:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){var n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$root.$confirm("Delete","Are you sure?",{color:"warning"});case 2:if(!t.sent){t.next=16;break}return t.prev=3,n=this.accounts.indexOf(e),a=this.accounts[n].id,t.next=8,f.deleteAccount(a);case 8:this.accounts=this.accounts.filter(function(t){return t.id!==a}),this.totalAccounts--,this.snackSuccess("account deleted"),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](3),this.snackError("could not delete account");case 16:case"end":return t.stop()}},t,this,[[3,13]])}));function e(e){return t.apply(this,arguments)}return e}(),snackSuccess:function(t){this.snack=!0,this.snackColor="success",this.snackText=t},snackError:function(t){this.snack=!0,this.snackColor="error",this.snackText=t}}},b=g,w=(n("17e1"),n("2877")),x=n("6544"),k=n.n(x),A=n("8336"),_=n("b0af"),C=n("99d9"),y=n("12b2"),R=n("ac7c"),O=n("a523"),j=n("8fea"),T=n("169a"),$=n("ce7e6"),V=n("4bd4"),S=n("132d"),E=n("2db4"),D=n("9910"),I=(n("94a7"),n("2e29"),n("5368")),L=n("c341"),F=n("0789"),N=n("490a"),P=n("80d2"),B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},q={name:"v-switch",directives:{Touch:L["a"]},mixins:[I["a"]],props:{loading:{type:[Boolean,String],default:!1}},computed:{classes:function(){return{"v-input--selection-controls v-input--switch":!0}},switchData:function(){return this.setTextColor(this.loading?void 0:this.computedColor,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",this.$attrs),this.genRipple(this.setTextColor(this.computedColor,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",B({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",B({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(F["b"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(N["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===P["n"].left&&this.isActive||t.keyCode===P["n"].right&&!this.isActive)&&this.onChange()}}},z=n("2677"),J=n("71d9"),K=n("2a7f"),U=Object(w["a"])(b,a,r,!1,null,"8094db20",null);U.options.__file="Accounts.vue";e["default"]=U.exports;k()(U,{VBtn:A["a"],VCard:_["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:y["a"],VCheckbox:R["a"],VContainer:O["a"],VDataTable:j["a"],VDialog:T["a"],VDivider:$["a"],VForm:V["a"],VIcon:S["a"],VSnackbar:E["a"],VSpacer:D["a"],VSwitch:q,VTextField:z["a"],VToolbar:J["a"],VToolbarTitle:K["b"]})}}]);
//# sourceMappingURL=chunk-6fc85424.541c54e1.js.map